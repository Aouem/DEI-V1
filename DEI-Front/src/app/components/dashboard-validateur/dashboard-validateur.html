<div class="dashboard">
  <div class="dashboard-header">
    <h2>Bienvenue, {{ currentUser?.userName }}</h2>
    <button class="logout-btn" (click)="logout()">Logout</button>
  </div>

  <div class="cards-container" *ngIf="isAdmin || isValidateur">
      
    <!-- Arbre des causes -->
    <div class="card arbre-card" (click)="navigateTo('/arbre-de-cause')">
      <div class="card-icon">ðŸŒ³</div>
      <div class="card-content">
        <h3>Arbre des causes</h3>
        <p>Voir arbre des causes</p>
      </div>
    </div>

    <!-- Soumissions -->
    <div class="card submissions-card" (click)="navigateTo('/all-submissions')">
      <div class="card-icon">ðŸ“„</div>
      <div class="card-content">
        <h3>Soumissions</h3>
        <p>Voir toutes les soumissions</p>
      </div>
    </div>

    <!-- Statistiques -->
    <div class="card stats-card" (click)="navigateTo('/detail-extra')">
      <div class="card-icon">ðŸ“Š</div>
      <div class="card-content">
        <h3>Statistiques</h3>
        <p>Voir Statistiques</p>
      </div>
    </div>
<!-- ðŸ”¹ Incidents aujourd'hui -->
<div class="incident-counter incidents-card">
  <h3>Incidents aujourd'hui</h3>

  <!-- Compteur total -->
  <div class="incident-number" [ngClass]="getIncidentClass(todayIncidentCount)">
    {{ todayIncidentCount }}
  </div>

  <!-- Lampe clignotante si incidents > 0 -->
  <span *ngIf="todayIncidentCount > 0" class="big-blinking-lamp">ðŸ’¡</span>

  <!-- Barres de gravitÃ© -->
  <div class="severity-bars" *ngIf="todayIncidentCount > 0">
    <div *ngFor="let key of severityKeys()" class="severity-bar-container">
      <span class="severity-label">GravitÃ© {{ key }} :</span>
      <div class="severity-bar" 
           [style.width.%]="(severityCount[key] / todayIncidentCount) * 100"
           [style.backgroundColor]="getSeverityColor(key)">
        <!-- Optionnel : retirer le nombre pour ne pas rÃ©pÃ©ter -->
        <!-- {{ severityCount[key] }} -->
      </div>
    </div>
  </div>
</div>


</div>

  <footer class="dashboard-footer">
    <span class="footer-text">HMB</span>
    <div class="bubbles">
      <span></span><span></span><span></span><span></span><span></span>
    </div>
  </footer>
</div>
