<div *ngIf="hasData; else noData">
  <h2>Confirmation de la soumission #{{ submissionId }}</h2>
  <p>Date : {{ submissionDate | date:'medium' }}</p>

<div *ngFor="let category of groupedResponses | keyvalue: preserveOrder">
<h3>... (Risque : {{ categoryRiskScores[category.key].riskLevel }})</h3>
    <table border="1" width="100%" style="margin-bottom: 20px;">
      <thead>
        <tr>
          <th>ID</th>
          <th>Question</th>
          <th>Réponse</th>
          <th>Détails</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let resp of category.value">
          <td>{{ resp.id }}</td>
          <td>{{ resp.question }}</td>
          <td>{{ resp.response }}</td>
          <td>{{ resp.details || '-' }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <h3>Questions à investiguer</h3>
  <ul>
    <li *ngFor="let q of questionsToInvestigate">
      {{ q.question }} - {{ q.response }}
    </li>
  </ul>

  <button (click)="printPage()">Imprimer</button>
  <button (click)="goToAllSubmissions()">Retour aux soumissions</button>
</div>

<ng-template #noData>
  <p>Aucune soumission trouvée.</p>
</ng-template>
